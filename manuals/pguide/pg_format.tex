%------------------------------------------------------------------------
% Miriad Programmer's Guide
%	TeX formats
%
%  History:
%            16feb91  mjs  Borrowed format file; some additions.
%------------------------------------------------------------------------
%-----------------%
% PAGE DIMENSIONS %
%-----------------%
\magnification=\magstep0
\hsize=5.0 truein
\vsize=8.0 truein
\hoffset=0.75 truein
\voffset=0.25 truein
\raggedbottom
\parindent=0pt
\parskip=0pt
%--------------------------%
% FONT FAMILY DEFINITIONS  %
% 12,11,10,9,8 pt families %
%--------------------------%
\font\twelverm=cmr12           \font\tenrm=cmr10   \font\sevenrm=cmr7
\font\twelvei=cmmi12           \font\teni=cmmi10   \font\seveni=cmmi7
\font\twelveit=cmti12          \font\tenit=cmti10  \font\sevenit=cmti7
\font\twelvesy=cmsy10 at 12pt  \font\tensy=cmsy10  \font\sevensy=cmsy7
\font\twelvett=cmtt12          \font\tentt=cmtt10  
\font\twelvebf=cmbx12          \font\tenbf=cmbx10  \font\sevenbf=cmbx7
%
\font\elevenrm=cmr10 at 11pt
\font\eleveni=cmmi10 at 11pt
\font\elevenit=cmti10 at 11pt
\font\elevensy=cmsy10 at 11pt
\font\eleventt=cmtt10 at 11pt
\font\elevenbf=cmbx10 at 11pt
%
\font\ninerm=cmr9
\font\ninei=cmmi9
\font\nineit=cmti9
\font\ninesy=cmsy9
\font\ninett=cmtt9
\font\ninebf=cmbx9
%
\font\eightrm=cmr8    \font\sixrm=cmr6    \font\fiverm=cmr5
\font\eighti=cmmi8    \font\sixi=cmmi6    \font\fivei=cmmi5
\font\eightit=cmti8
\font\eightsy=cmsy8   \font\sixsy=cmsy6   \font\fivesy=cmsy5
\font\eighttt=cmtt8
\font\eightbf=cmbx8   \font\sixbf=cmbx6   \font\fivebf=cmbx5
%-----------------------------------------------------------------------
\def\twelvepoint{\def\rm{\fam0\twelverm}
    \textfont0=\twelverm \scriptfont0=\tenrm \scriptscriptfont0=\sevenrm
    \textfont1=\twelvei  \scriptfont1=\teni  \scriptscriptfont1=\seveni
    \textfont2=\twelvesy \scriptfont2=\tensy \scriptscriptfont2=\sevensy
    \textfont\itfam=\twelveit  \def\it{\fam\itfam\twelveit}
    \textfont\ttfam=\twelvett  \def\tt{\fam\ttfam\twelvett}
    \textfont\bffam=\twelvebf  \scriptfont\bffam=\tenbf
      \scriptscriptfont\bffam=\tenbf   \def\bf{\fam\bffam\twelvebf}
    \normalbaselineskip=16pt
    \setbox\strutbox=\hbox{\vrule height12pt depth4pt width0pt}
    \normalbaselines\rm}
%-----------------------------------------------------------------------
\def\elevenpoint{\def\rm{\fam0\elevenrm}
    \textfont0=\elevenrm \scriptfont0=\eightrm \scriptscriptfont0=\sixrm
    \textfont1=\eleveni  \scriptfont1=\eighti  \scriptscriptfont1=\sixi
    \textfont2=\elevensy \scriptfont2=\eightsy \scriptscriptfont2=\sixsy
    \textfont\itfam=\elevenit  \def\it{\fam\itfam\elevenit}
    \textfont\ttfam=\eleventt  \def\tt{\fam\ttfam\eleventt}
    \textfont\bffam=\elevenbf  \scriptfont\bffam=\eightbf
      \scriptscriptfont\bffam=\sixbf   \def\bf{\fam\bffam\elevenbf}
    \normalbaselineskip=13pt
    \setbox\strutbox=\hbox{\vrule height8.5pt depth3.5pt width0pt}
    \normalbaselines\rm}
%-----------------------------------------------------------------------
\def\tenpoint{\def\rm{\fam0\tenrm}
    \textfont0=\tenrm \scriptfont0=\sevenrm \scriptscriptfont0=\fiverm
    \textfont1=\teni  \scriptfont1=\seveni  \scriptscriptfont1=\fivei
    \textfont2=\tensy \scriptfont2=\sevensy \scriptscriptfont2=\fivesy
    \textfont\itfam=\tenit  \def\it{\fam\itfam\tenit}
    \textfont\ttfam=\tentt  \def\tt{\fam\ttfam\tentt}
    \textfont\bffam=\tenbf  \scriptfont\bffam=\sevenbf
      \scriptscriptfont\bffam=\fivebf   \def\bf{\fam\bffam\tenbf}
    \normalbaselineskip=12pt
    \setbox\strutbox=\hbox{\vrule height8.5pt depth3.5pt width0pt}
    \normalbaselines\rm}
%-----------------------------------------------------------------------
\def\ninepoint{\def\rm{\fam0\ninerm}
    \textfont0=\ninerm \scriptfont0=\sevenrm \scriptscriptfont0=\fiverm
    \textfont1=\ninei  \scriptfont1=\seveni  \scriptscriptfont1=\fivei
    \textfont2=\ninesy \scriptfont2=\sevensy \scriptscriptfont2=\fivesy
    \textfont\itfam=\nineit  \def\it{\fam\itfam\nineit}
    \textfont\ttfam=\ninett  \def\tt{\fam\ttfam\ninett}
    \textfont\bffam=\ninebf  \scriptfont\bffam=\sevenbf
      \scriptscriptfont\bffam=\fivebf   \def\bf{\fam\bffam\ninebf}
    \normalbaselineskip=10pt
    \setbox\strutbox=\hbox{\vrule height8pt depth3pt width0pt}
    \normalbaselines\rm}
%-----------------------------------------------------------------------
\def\eightpoint{\def\rm{\fam0\eightrm}
    \textfont0=\eightrm \scriptfont0=\sixrm \scriptscriptfont0=\fiverm
    \textfont1=\eighti  \scriptfont1=\sixi  \scriptscriptfont1=\fivei
    \textfont2=\eightsy \scriptfont2=\sixsy \scriptscriptfont2=\fivesy
    \textfont\itfam=\eightit  \def\it{\fam\itfam\eightit}
    \textfont\ttfam=\eighttt  \def\tt{\fam\ttfam\eighttt}
    \textfont\bffam=\eightbf  \scriptfont\bffam=\sixbf
      \scriptscriptfont\bffam=\fivebf  \def\bf{\fam\bffam\eightbf}
    \normalbaselineskip=9pt
    \setbox\strutbox=\hbox{\vrule height7pt depth2pt width0pt}
    \normalbaselines\rm}
%-----------------------------------------------------------------------
%---------------%
% DEFINED FONTS %
%---------------%
\font\secfont=cmb10 scaled\magstep1
\font\bit=cmbxsl10 scaled\magstep1
\font\big=cmbx10 scaled\magstep2
\font\bigger=cmbx10 scaled\magstep3
\font\biggest=cmbx10 scaled\magstep4
%------------------------%
% PAGE HEADER AND FOOTER %
%------------------------%
\headline={\amirno=1\ifnum\pageno=-1{\amirno=0}\fi
           \ifnum\pageno=1{\amirno=0}\fi
           \ifnum\amirno=1{\hfil} \else \firstmark \fi}
%\headline={\ifnum\pageno=-1{\hfil} \else \firstmark \fi}
\footline={\hfil}
%---------%
%  DEF'S  %
%---------%
\def\z1A{\eightpoint A}
\def\LaTeX{{\rm L\kern-1.75em\raise.3ex\hbox{\z1A}\kern-.12em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\def\newline{\par\noindent}
\def\abox#1{\hbox to 2.2cm{#1\hfil}}
\def\itemtext#1{\bigskip\par\noindent{\big #1}\smallskip\par}
%------------------%
% SECTION HEADINGS %
%------------------%
\newtoks\chapno
\newcount\amirno
\newcount\bmirno
\newcount\subno
\newwrite\toc
\openout\toc=toc
\def\beginAppendix#1#2#3{\bgroup\chapno={#1}\pageno=1\mark{\hfil}
    \bmirno=0
    \centerline{\bit #3 #1}
    \aptoc{#1}{#2}{\the\chapno}{\the\count0}
    \vskip 0.3in\centerline{\big #2}
    \mark{\noexpand\ifodd \noexpand\pageno  
                        \noexpand\eightrm 
                        \noexpand\hfil #2
                        \noexpand\qquad#1-\noexpand\folio 
        \noexpand\else  
                        \noexpand\eightrm#1-\noexpand\folio 
                        \noexpand\qquad #2
                        \noexpand\hfil 
        \noexpand\fi}
    \vskip 0.5in\elevenpoint
    }
\def\beginChapter#1#2#3{\bgroup\chapno={#1}\pageno=1\mark{\hfil}
    \bmirno=0
    \centerline{\bit #3 #1}
    \chtoc{#1}{#2}{\the\chapno}{\the\count0}
    \vskip 0.3in\centerline{\big #2}
    \mark{\noexpand\ifodd \noexpand\pageno  
                        \noexpand\eightrm 
                        \noexpand\hfil #2
                        \noexpand\qquad#1-\noexpand\folio 
        \noexpand\else  
                        \noexpand\eightrm#1-\noexpand\folio 
                        \noexpand\qquad #2
                        \noexpand\hfil 
        \noexpand\fi}
    \vskip 0.5in\elevenpoint
    }

\outer\def\beginchapter#1#2{\beginChapter{#1}{#2}{Chapter}}
\outer\def\beginappendix#1#2{\beginAppendix{#1}{#2}{Appendix}}
\outer\def\endchapter{\vfill\supereject\egroup}

\newskip\beforesubamount
\newskip\aftersubamount
  \beforesubamount=0.45in plus4pt minus4pt
  \aftersubamount=0.2in plus1pt minus1pt

\newskip\beforesecamount
\newskip\aftersecamount
  \beforesecamount=0.45in plus4pt minus4pt
  \aftersecamount=0.2in plus1pt minus1pt

\def\za{\hskip 2em}
\outer\def\beginsection#1\par{
  \subno=0\advance\bmirno by 1
  \goodbreak\vskip\beforesecamount
  \leftline{\secfont\the\chapno.\the\bmirno\quad#1}
   \immediate\write\toc{\noexpand\itemsection {\za}\the\chapno.\the\bmirno {   } #1/\the\chapno-\the\count0.}
  \nobreak\vskip\aftersecamount\vskip-\parskip\noindent}

\def\zb{\hskip 4em}
\outer\def\beginsub#1\par{
  \advance\subno by 1
  \goodbreak\vskip\beforesubamount
  \leftline{\secfont\the\chapno.\the\bmirno.\the\subno\quad#1}
    \immediate\write\toc{\noexpand\itemsection
               {\zb}\the\chapno.\the\bmirno.\the\subno {   } #1/\the\chapno-\the\count0.}
  \nobreak\vskip\aftersubamount\vskip-\parskip\noindent}

%----------------%
% DISPLAYED TEXT %
%----------------%
\outer\def\proclaim #1:{\medbreak\vskip-\parskip
  \noindent{\bf#1:}\enspace}

\outer\def\begindisplay{\obeylines\startdisplay}
{\obeylines\gdef\startdisplay#1
  {catcode`\^^M=5$$#1\halign\bgroup\indent##\hfil&&\qquad##\hfil\cr}}
\outer\def\enddisplay{\crcr\egroup$$}

\chardef\other=12
\def\ttverbatim{\begingroup \catcode`\\=\other \catcode`\{=\other
  \catcode`\}=\other \catcode`\$=\other \catcode`\&=\other
  \catcode`\#=\other \catcode`\%=\other \catcode`\~=\other
  \catcode`\_=\other \catcode`\^=\other
  \obeyspaces \obeylines \tt}
{\obeyspaces\gdef {\ }} % \obeyspaces now gives \ , not \space

\outer\def\begintt{$$\let\par=\endgraf \ttverbatim \parskip=0pt
 \catcode`\|=0 \rightskip=-5pc \ttfinish}
{\catcode`\|=0 \catcode`|\=\other % | is temporary escape character
 |obeylines % end of line is active
 |gdef|ttfinish#1^^M#2\endtt{#1|vbox{#2}|endgroup$$^^M}}

\catcode`\|=\active
\newskip\ttglue
\ttglue=6pt plus 2pt
{\obeylines\gdef|{\ttverbatim\spaceskip=\ttglue\let^^M=\ \let|=\endgroup}}
%------------%
% TOC MACROS %
%------------%
\def\chtoc#1#2#3#4{
	\ifnum\the\chapno=1\write\toc{\noexpand\itemchapter #1/#2/#3-#4.}
	\else\immediate\write\toc{\noexpand\itemchapter #1/#2/#3-#4.}\fi}
\def\aptoc#1#2#3#4{\immediate\write\toc{\noexpand\itemchapter #1/#2/#3-#4.}}
\def\ldrfill{\leaders\hbox to 1em{\hss.\hss}\hfill}
\def\itemsection#1/#2.{\line{#1\ldrfill#2}\smallskip}
\def\itemchapter#1/#2/#3.{\bigskip\line{{\bf#1\quad#2}\ldrfill#3}\smallskip}
%----------------%
% END OF FORMATS %
%----------------%
